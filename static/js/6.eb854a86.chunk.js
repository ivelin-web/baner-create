(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{113:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(20),c=n.n(a),r=n(29),s=n(42),i=n(30),o=n.n(i),l=function e(){Object(s.a)(this,e)};l.get=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/baners");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),l.add=function(){var e=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/baners",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l.edit=function(){var e=Object(r.a)(c.a.mark((function e(t,n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.put("/baners/".concat(n),t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l.remove=function(){var e=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.delete("/baners/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},121:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));var a=n(0),c=n(108),r=n(2),s=n(10),i=n(110),o=n(19),l=n(130),u=n(109),d=n(34),b=n(119),j=(n(120),n(116),n(121),n(21)),m=n(128),h=n(122),f=n(113),p=n(1);function x(e){var t,n,c=e._id,r=e.onEdit,o=e.image,l=e.text,b=e.onHide,j=Object(a.useState)(null),x=Object(s.a)(j,2),O=x[0],v=x[1],g=Object(a.useState)(l),y=Object(s.a)(g,2),w=y[0],N=y[1],k=Object(a.useState)(!1),C=Object(s.a)(k,2),S=C[0],E=C[1],F=Object(a.useState)({}),I=Object(s.a)(F,2),B=I[0],_=I[1],D=Object(a.useRef)();return Object(p.jsxs)(m.a,{show:!0,onHide:b,children:[Object(p.jsx)(m.a.Header,{closeButton:!0,children:Object(p.jsx)(m.a.Title,{children:"Edit Baner"})}),Object(p.jsx)(m.a.Body,{children:Object(p.jsxs)(h.a,{onSubmit:function(e){e.preventDefault(),E(!0);var t=new FormData;w!==l&&t.append("text",w),O&&t.append("image",O),f.a.edit(t,c).then((function(e){r(),d.c.success("Your baner was edited successfully")})).catch((function(e){403!==e.response.status?(E(!1),_(e.response.data.errors)):d.c.warning(e.response.data.message)}))},children:[Object(p.jsxs)(h.a.Group,{className:"mb-3",controlId:"formBasicText",children:[Object(p.jsx)(h.a.Control,{isInvalid:null===B||void 0===B?void 0:B.text,onChange:function(e){N(e.target.value)},value:w,type:"text",placeholder:"Text"}),Object(p.jsx)(h.a.Control.Feedback,{type:"invalid",children:null===B||void 0===B||null===(t=B.text)||void 0===t?void 0:t.message})]}),Object(p.jsxs)(h.a.Group,{controlId:"formFile",className:"mb-3",children:[Object(p.jsx)(h.a.Control,{isInvalid:null===B||void 0===B?void 0:B.image,onChange:function(){v(D.current.files[0])},ref:D,className:"form-control",type:"file"}),Object(p.jsx)(h.a.Control.Feedback,{type:"invalid",children:null===B||void 0===B||null===(n=B.image)||void 0===n?void 0:n.message})]}),O?Object(p.jsx)("img",{className:"img-fluid d-block mb-3",src:URL.createObjectURL(O),alt:"Image Selected",style:{objectFit:"contain",width:"100%"}}):Object(p.jsx)("img",{className:"img-fluid d-block mb-3",src:"".concat("https://baner-creator-api.herokuapp.com/images","/baners/").concat(o),alt:"Image Selected",style:{objectFit:"contain",width:"100%"}}),Object(p.jsxs)("div",{className:"d-flex",children:[Object(p.jsx)(u.a,{disabled:S||w===l&&!O,className:"bg-primary",type:"submit",style:{width:"130px"},children:S?Object(p.jsx)(i.a,{size:"sm",animation:"border",role:"status",children:Object(p.jsx)("span",{className:"visually-hidden",children:"Loading..."})}):"Edit Banner"}),Object(p.jsx)(u.a,{disabled:S,className:"ms-auto bg-primary",onClick:b,children:"Close"})]})]})})]})}var O="You are not the owner of this baner";function v(e){var t=e._id,n=e.text,c=e.image,r=e.userId,i=e.onEdit,o=Object(a.useState)(!1),m=Object(s.a)(o,2),h=m[0],v=m[1],g=Object(a.useContext)(j.a).user._id===r,y=function(){f.a.remove(t).then((function(e){i(),d.c.success(e.data.message)})).catch((function(e){d.c.warning(e.response.data.message||"Error")}))};return Object(p.jsxs)(p.Fragment,{children:[h&&Object(p.jsx)(x,{_id:t,onEdit:i,image:c,text:n,onHide:function(){v(!1)}}),Object(p.jsxs)(l.a,{className:"p-0 col-10 shadow-lg",children:[Object(p.jsxs)(l.a.Body,{className:"px-0",children:[Object(p.jsx)(l.a.Title,{className:"text-center",children:n}),Object(p.jsx)(l.a.Img,{className:"d-block img-fluid",style:{objectFit:"cover",width:"100%",height:"25vh"},variant:"top",src:"".concat("https://baner-creator-api.herokuapp.com/images","/baners/").concat(c)})]}),Object(p.jsxs)(l.a.Footer,{className:"d-flex",children:[Object(p.jsx)(u.a,{onClick:function(){g?v(!0):d.c.warning(O)},disabled:!g,variant:"success",children:"Edit"}),Object(p.jsx)(u.a,{disabled:!g,onClick:function(){g?Object(b.confirmAlert)({title:"Are you sure?",message:"You want to delete this baner?",buttons:[{label:"Yes, Delete it!",onClick:y},{label:"No"}]}):d.c.warning(O)},variant:"danger ms-auto",children:"Delete"})]})]})]})}function g(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(!0),u=Object(s.a)(l,2),d=u[0],b=u[1];Object(a.useEffect)((function(){j()}),[]);var j=function(){d||b(!0),f.a.get().then((function(e){c(e.data)})).catch((function(e){console.log(e.response)})).finally((function(){b(!1)}))},m=function(){j()};return d?Object(p.jsx)("div",{className:"position-absolute start-50 top-50",style:{transform:"translate(-50%, -50%)"},children:Object(p.jsx)(i.a,{size:"lg",animation:"border",role:"status",variant:"primary",children:Object(p.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):0===n.length?Object(p.jsxs)("h5",{className:"text-center  ",children:["No created baners, create first from ",Object(p.jsx)(o.b,{to:"/create",children:"here"})]}):Object(p.jsx)("div",{className:"row justify-content-center gap-5",children:n.map((function(e){return Object(p.jsx)(v,Object(r.a)({onEdit:m},e),e._id)}))})}function y(){return Object(p.jsx)("section",{className:"py-4",children:Object(p.jsxs)(c.a,{children:[Object(p.jsx)("h1",{className:"text-center text-primary mb-5",children:"Baners"}),Object(p.jsx)(g,{})]})})}}}]);
//# sourceMappingURL=6.eb854a86.chunk.js.map